# News Platform: Интеллектуальная система анализа и рекомендаций новостей

[![Python](https://img.shields.io/badge/Python-3.11-blue?logo=python)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.112-green?logo=fastapi)](https://fastapi.tiangolo.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue?logo=postgresql)](https://www.postgresql.org/)
[![Docker](https://img.shields.io/badge/Docker-Compose-blue?logo=docker)](https://www.docker.com/)

Это проект для отбора на хакатон, демонстрирующий разработку полной системы для сбора, анализа и персонализированной рекомендации новостей. Проект включает парсинг RSS-лент, кластеризацию новостей с использованием ИИ, генерацию суммаризаций кластеров с помощью LLM, хранение данных в БД и пользовательский интерфейс с рекомендациями на основе интересов пользователя.

## Важная информация

Очень проблематично хостить проект с LLM (используется для абстрактивной суммаризации при запуске статей), поэтому для живого тестирования, пожалуйста, свяжитесь со мной через [ТГ](https://t.me/Ano2007nim)
Запуск сервера у меня займёт примерно 15 - 40 (если обновить ленту) минут. 
Если захотите развернуть у себя: самое тяжёлое Qwen (~6 GB) и RSS лента (точно не скажу) [Текущая ссылка](https://demo.cloudpub.ru/News_rec/frontend_v3/index_all.html)

## Описание проекта

Система собирает новости из различных RSS-источников (например, TASS, Lenta.ru, Kommersant и другие), извлекает полный текст статей, кластеризует их по темам с использованием эмбеддингов и DBSCAN, генерирует суммаризации кластеров с помощью модели Qwen (LLM), хранит данные в PostgreSQL и предоставляет API для рекомендаций. Пользователи могут регистрироваться, отмечать прочитанные статьи, и система строит персонализированные рекомендации на основе хэштегов, сущностей, авторов и кластеров.

Ключевые инновации:
- Автоматическая кластеризация новостей без предопределенных категорий.
- Использование LLM для генерации осмысленных названий и суммаризаций кластеров.
- Персонализация рекомендаций с учетом истории чтения.
- Поддержка русскоязычных источников с NER (Natasha) для извлечения сущностей.

Проект развертывается с помощью Docker Compose, включая контейнеры для парсера RSS, API, PostgreSQL и SGLang (для LLM).

## Основные функции

- **Сбор новостей**: Парсинг RSS-лент каждые 4 часа (число можно менять), извлечение полного текста статей из 11+ источников.
- **Анализ и кластеризация**: 
  - Извлечение хэштегов и сущностей (PER, LOC, ORG) с помощью Natasha.
  - Кластеризация с DBSCAN на основе эмбеддингов (SentenceTransformer: deepvk/USER-bge-m3).
  - Суммаризация кластеров с LLM (Qwen-14B-AWQ).
- **Хранение данных**: PostgreSQL с моделями для пользователей, статей, кластеров и связей.
- **API (FastAPI)**: 
  - Аутентификация (регистрация/логин с JWT).
  - Эндпоинты для статей, кластеров, рекомендаций, профиля пользователя.
  - Обработка RSS в фоне.
- **Frontend**: Простой HTML/JS интерфейс с авторизацией, выбором источников, просмотром рекомендаций, статей и кластеров.
- **Рекомендации**: На основе интересов пользователя (хэштеги, авторы, кластеры), с объяснениями (reasons).

## Функции в разработке

- **Подключение своих источников**: Пока предлагается оставить заявку на подключение источника
- **Изображения у статей**: Отключен их сбор для ускоренния работы 
- **Хранение данных**: PostgreSQL с моделями для пользователей, статей, кластеров и связей.
- **Хранение RSS ленты с текстом**: планируется переезд в Redis

## Технологический стек

- **Backend**: Python 3.11, FastAPI, SQLAlchemy (PostgreSQL), SentenceTransformers, DBSCAN (scikit-learn), Natasha (NER).
- **LLM**: Qwen-14B-AWQ через SGLang для суммаризации кластеров.
- **Парсинг**: aiohttp, feedparser, BeautifulSoup для извлечения текста из статей.
- **Frontend**: HTML/CSS/JS (vanilla) с темной/светлой темой.
- **Развертывание**: Docker Compose (Postgres, SGLang, RSS Parser, API).
- **Другие**: Pydantic для валидации, JWT для auth, asyncio для асинхронного парсинга.

## Установка и запуск

### Требования
- Docker и Docker Compose.
- GPU (NVIDIA) для SGLang (минимум 12GB VRAM, например RTX 3080 Ti).
- Python 3.11+ (для локального запуска без Docker).

### Шаги для запуска с Docker
1. Клонируйте репозиторий:
   ```
   git clone https://github.com/your-repo/news-platform.git
   cd news-platform
   ```
2. Настройте переменные окружения в `.env` (пример в `.env.example`):
   - `DB_PASSWORD`: Пароль для PostgreSQL.
   - `SECRET_KEY`: Ключ для JWT.
   - `CUDA_VISIBLE_DEVICES`: Для GPU (например, `0`).

3. Запустите Docker Compose:
   ```
   docker-compose up -d --build
   ```
   - Ждите, пока SGLang скачает модель (может занять время).
   - API доступно на `http://localhost:8000`.
   - Swagger docs: `http://localhost:8000/docs`.
   - Frontend: Откройте `index.html` в браузере (или интегрируйте с сервером).

4. RSS-парсер запустится автоматически и обновляется каждые 4 часа. Результаты в `./rss_parser/output/rss_feed_4h.json`.

## Демонстрация работы
[Видео-демо](https://drive.google.com/file/d/1LZlGolqCl5mPHjCZBjQCePiyYZynaeWk/view?usp=sharing). В настоящее время проект демонстрирует полный пайплайн: от парсинга до рекомендаций.

## Лицензия
MIT License. Подробности в [LICENSE](LICENSE).

## Контакты
Для вопросов или предложений: [Telegram](https://t.me/Ano2007nim) или через Issues на GitHub.

Этот проект разработан для отбора на хакатон Рабочее Название.
